<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="In me the tiger sniffs the rose.">
<meta property="og:type" content="website">
<meta property="og:title" content="TokgoLiang的博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="TokgoLiang的博客">
<meta property="og:description" content="In me the tiger sniffs the rose.">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="TokgoLiang的博客">
<meta name="twitter:description" content="In me the tiger sniffs the rose.">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/"/>

  <title> TokgoLiang的博客 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">TokgoLiang的博客</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/11/Java基础 之软引用、弱引用、虚引用/" itemprop="url">
                  Java基础 之软引用、弱引用、虚引用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-11T14:56:05+08:00" content="2016-09-11">
              2016-09-11
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java-基础/" itemprop="url" rel="index">
                    <span itemprop="name">java_基础</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://www.cnblogs.com/blogoflee/archive/2012/03/22/2411124.html" target="_blank" rel="external">TokgoLiang——转载别人的原文链接一定要写在开头</a></p>
<h2 id="1-概述"><a href="#1-概述" class="headerlink" title="1 概述"></a>1 概述</h2><p>　　在JDK1.2以前的版本中，当一个对象不被任何变量引用，那么程序就无法再使用这个对象。也就是说，只有对象处于可触及状态，程序才能使用它。这就像在日常生活中，从商店购买了某样物品后，如果有用，就一直保留它，否则就把它扔到垃圾箱，由清洁工人收走。一般说来，如果物品已经被扔到垃圾箱，想再 把它捡回来使用就不可能了。<br>　　但有时候情况并不这么简单，你可能会遇到类似鸡肋一样的物品，食之无味，弃之可惜。这种物品现在已经无用了，保留它会占空间，但是立刻扔掉它也不划算，因 为也许将来还会派用场。对于这样的可有可无的物品，一种折衷的处理办法是：如果家里空间足够，就先把它保留在家里，如果家里空间不够，即使把家里所有的垃 圾清除，还是无法容纳那些必不可少的生活用品，那么再扔掉这些可有可无的物品。<br>　　从JDK1.2版本开始，把对象的引用分为四种级别，从而使程序能更加灵活的控制对象的生命周期。这四种级别由高到低依次为：强引用、软引用、弱引用和虚引用。</p>
<h2 id="2-强引用"><a href="#2-强引用" class="headerlink" title="2 强引用"></a>2 强引用</h2><p>　　平时我们编程的时候例如：Object object=new Object（）；那object就是一个强引用了。如果一个对象具有强引用，那就类似于必不可少的生活用品，垃圾回收器绝不会回收它。当内存空 间不足，Java虚拟机宁愿抛出OutOfMemoryError错误，使程序异常终止，也不会靠随意回收具有强引用的对象来解决内存不足问题。</p>
<h2 id="3-软引用（SoftReference）"><a href="#3-软引用（SoftReference）" class="headerlink" title="3 软引用（SoftReference）"></a>3 软引用（SoftReference）</h2><p>　　如果一个对象只具有软引用，那就类似于可有可物的生活用品。如果内存空间足够，垃圾回收器就不会回收它，如果内存空间不足了，就会回收这些对象的内存。只 要垃圾回收器没有回收它，该对象就可以被程序使用。软引用可用来实现内存敏感的高速缓存。 软引用可以和一个引用队列（ReferenceQueue）联 合使用，如果软引用所引用的对象被垃圾回收，Java虚拟机就会把这个软引用加入到与之关联的引用队列中。</p>
<h2 id="4-弱引用（WeakReference）"><a href="#4-弱引用（WeakReference）" class="headerlink" title="4 弱引用（WeakReference）"></a>4 弱引用（WeakReference）</h2><p>　　如果一个对象只具有弱引用，那就类似于可有可物的生活用品。弱引用与软引用的区别在于：只具有弱引用的对象拥有更短暂的生命周期。在垃圾回收器线程扫描它 所管辖的内存区域的过程中，一旦发现了只具有弱引用的对象，不管当前内存空间足够与否，都会回收它的内存。不过，由于垃圾回收器是一个优先级很低的线程， 因此不一定会很快发现那些只具有弱引用的对象。  弱引用可以和一个引用队列（ReferenceQueue）联合使用，如果弱引用所引用的对象被垃圾回 收，Java虚拟机就会把这个弱引用加入到与之关联的引用队列中。 </p>
<h2 id="5-虚引用（PhantomReference）"><a href="#5-虚引用（PhantomReference）" class="headerlink" title="5 虚引用（PhantomReference）"></a>5 虚引用（PhantomReference）</h2><p>　　“虚引用”顾名思义，就是形同虚设，与其他几种引用都不同，虚引用并不会决定对象的生命周期。如果一个对象仅持有虚引用，那么它就和没有任何引用一样，在 任何时候都可能被垃圾回收。 虚引用主要用来跟踪对象被垃圾回收的活动。虚引用与软引用和弱引用的一个区别在于：虚引用必须和引用队列 （ReferenceQueue）联合使用。当垃圾回收器准备回收一个对象时，如果发现它还有虚引用，就会在回收对象的内存之前，把这个虚引用加入到与之 关联的引用队列中。程序可以通过判断引用队列中是否已经加入了虚引用，来了解被引用的对象是否将要被垃圾回收。程序如果发现某个虚引用已经被加入到引用队 列，那么就可以在所引用的对象的内存被回收之前采取必要的行动。 </p>
<h2 id="6-相关应用"><a href="#6-相关应用" class="headerlink" title="6 相关应用"></a>6 相关应用</h2><p>　　在java.lang.ref包中提供了三个类：SoftReference类、WeakReference类和PhantomReference类，它 们分别代表软引用、弱引用和虚引用。ReferenceQueue类表示引用队列，它可以和这三种引用类联合使用，以便跟踪Java虚拟机回收所引用的对 象的活动。</p>
<h2 id="7-使用软引用构建敏感数据的缓存"><a href="#7-使用软引用构建敏感数据的缓存" class="headerlink" title="7 使用软引用构建敏感数据的缓存"></a>7 使用软引用构建敏感数据的缓存</h2><h4 id="7-1-为什么需要使用软引用"><a href="#7-1-为什么需要使用软引用" class="headerlink" title="7.1 为什么需要使用软引用"></a>7.1 为什么需要使用软引用</h4><p>　　首先，我们看一个雇员信息查询系统的实例。我们将使用一个Java语言实现的雇员信息查询系统查询存储在磁盘文件或者数据库中的雇员人事档案信息。作为一 个用户，我们完全有可能需要回头去查看几分钟甚至几秒钟前查看过的雇员档案信息(同样，我们在浏览WEB页面的时候也经常会使用“后退”按钮)。这时我们 通常会有两种程序实现方式:一种是把过去查看过的雇员信息保存在内存中，每一个存储了雇员档案信息的Java对象的生命周期贯穿整个应用程序始终;另一种 是当用户开始查看其他雇员的档案信息的时候，把存储了当前所查看的雇员档案信息的Java对象结束引用，使得垃圾收集线程可以回收其所占用的内存空间，当 用户再次需要浏览该雇员的档案信息的时候，重新构建该雇员的信息。很显然，第一种实现方法将造成大量的内存浪费，而第二种实现的缺陷在于即使垃圾收集线程 还没有进行垃圾收集，包含雇员档案信息的对象仍然完好地保存在内存中，应用程序也要重新构建一个对象。我们知道，访问磁盘文件、访问网络资源、查询数据库 等操作都是影响应用程序执行性能的重要因素，如果能重新获取那些尚未被回收的Java对象的引用，必将减少不必要的访问，大大提高程序的运行速度。</p>
<h4 id="7-2-如果使用软引用"><a href="#7-2-如果使用软引用" class="headerlink" title="7.2 如果使用软引用"></a>7.2 如果使用软引用</h4><p>　　SoftReference的特点是它的一个实例保存对一个Java对象的软引用，该软引用的存在不妨碍垃圾收集线程对该Java对象的回收。也就是说， 一旦SoftReference保存了对一个Java对象的软引用后，在垃圾线程对这个Java对象回收前，SoftReference类所提供的 get()方法返回Java对象的强引用。另外，一旦垃圾线程回收该Java对象之后，get()方法将返回null。</p>
<h4 id="7-3-使用ReferenceQueue清除失去了软引用对象的SoftReference"><a href="#7-3-使用ReferenceQueue清除失去了软引用对象的SoftReference" class="headerlink" title="7.3 使用ReferenceQueue清除失去了软引用对象的SoftReference"></a>7.3 使用ReferenceQueue清除失去了软引用对象的SoftReference</h4><p>　　作为一个Java对象，SoftReference对象除了具有保存软引用的特殊性之外，也具有Java对象的一般性。所以，当软可及对象被回收之后， 虽然这个SoftReference对象的get()方法返回null,但这个SoftReference对象已经不再具有存在的价值，需要一个适当的清 除机制，避免大量SoftReference对象带来的内存泄漏。在java.lang.ref包里还提供了ReferenceQueue。如果在创建 SoftReference对象的时候，使用了一个ReferenceQueue对象作为参数提供给SoftReference的构造方法，如:</p>
<p>　　那么当这个SoftReference所软引用的aMyOhject被垃圾收集器回收的同时，ref所强引用的SoftReference对象被列入 ReferenceQueue。也就是说，ReferenceQueue中保存的对象是Reference对象，而且是已经失去了它所软引用的对象的 Reference对象。另外从ReferenceQueue这个名字也可以看出，它是一个队列，当我们调用它的poll()方法的时候，如果这个队列中 不是空队列，那么将返回队列前面的那个Reference对象。<br>　　<br>　　在任何时候，我们都可以调用ReferenceQueue的poll()方法来检查是否有它所关心的非强可及对象被回收。如果队列为空，将返回一个 null,否则该方法返回队列中前面的一个Reference对象。利用这个方法，我们可以检查哪个SoftReference所软引用的对象已经被回 收。于是我们可以把这些失去所软引用的对象的SoftReference对象清除掉。常用的方式为:</p>
<p>　　理解了ReferenceQueue的工作机制之后，我们就可以开始构造一个Java对象的高速缓存器了。</p>
<h4 id="7-4-通过软可及对象重获方法实现Java对象的高速缓存"><a href="#7-4-通过软可及对象重获方法实现Java对象的高速缓存" class="headerlink" title="7.4 通过软可及对象重获方法实现Java对象的高速缓存"></a>7.4 通过软可及对象重获方法实现Java对象的高速缓存</h4><p>　　利用Java2平台垃圾收集机制的特性以及前述的垃圾对象重获方法，我们通过一个雇员信息查询系统的小例子来说明如何构建一种高速缓存器来避免重复构建同一个对象带来的性能损失。我们将一个雇员的档案信息定义为一个Employee类:<br>　　<br>　　这个Employee类的构造方法中我们可以预见，如果每次需要查询一个雇员的信息。哪怕是几秒中之前刚刚查询过的，都要重新构建一个实例，这是需要消耗很多时间的。下面是一个对Employee对象进行缓存的缓存器的定义:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.lang.ref.ReferenceQueue;      </div><div class="line"><span class="keyword">import</span> java.lang.ref.SoftReference;      </div><div class="line"><span class="keyword">import</span> java.util.Hashtable;      </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmployeeCache</span> </span>&#123;      </div><div class="line">    <span class="keyword">static</span> <span class="keyword">private</span> EmployeeCache cache;<span class="comment">// 一个Cache实例      </span></div><div class="line">    <span class="keyword">private</span> Hashtable employeeRefs;<span class="comment">// 用于Cache内容的存储      </span></div><div class="line">    <span class="keyword">private</span> ReferenceQueue q;<span class="comment">// 垃圾Reference的队列      </span></div><div class="line">       </div><div class="line">    <span class="comment">// 继承SoftReference，使得每一个实例都具有可识别的标识。      </span></div><div class="line">    <span class="comment">// 并且该标识与其在HashMap内的key相同。      </span></div><div class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">EmployeeRef</span> <span class="keyword">extends</span> <span class="title">SoftReference</span> </span>&#123;      </div><div class="line">       <span class="keyword">private</span> String _key = <span class="string">""</span>;      </div><div class="line">       </div><div class="line">       <span class="function"><span class="keyword">public</span> <span class="title">EmployeeRef</span><span class="params">(Employee em, ReferenceQueue q)</span> </span>&#123;      </div><div class="line">           <span class="keyword">super</span>(em, q);      </div><div class="line">           _key = em.getID();      </div><div class="line">       &#125;      </div><div class="line">    &#125;      </div><div class="line">       </div><div class="line">    <span class="comment">// 构建一个缓存器实例      </span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">EmployeeCache</span><span class="params">()</span> </span>&#123;      </div><div class="line">       employeeRefs = <span class="keyword">new</span> Hashtable();      </div><div class="line">       q = <span class="keyword">new</span> ReferenceQueue();      </div><div class="line">    &#125;      </div><div class="line">       </div><div class="line">    <span class="comment">// 取得缓存器实例      </span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> EmployeeCache <span class="title">getInstance</span><span class="params">()</span> </span>&#123;      </div><div class="line">       <span class="keyword">if</span> (cache == <span class="keyword">null</span>) &#123;      </div><div class="line">           cache = <span class="keyword">new</span> EmployeeCache();      </div><div class="line">       &#125;      </div><div class="line">       <span class="keyword">return</span> cache;      </div><div class="line">    &#125;      </div><div class="line">       </div><div class="line">    <span class="comment">// 以软引用的方式对一个Employee对象的实例进行引用并保存该引用      </span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">cacheEmployee</span><span class="params">(Employee em)</span> </span>&#123;      </div><div class="line">       cleanCache();<span class="comment">// 清除垃圾引用      </span></div><div class="line">       EmployeeRef ref = <span class="keyword">new</span> EmployeeRef(em, q);      </div><div class="line">       employeeRefs.put(em.getID(), ref);      </div><div class="line">    &#125;      </div><div class="line">       </div><div class="line">    <span class="comment">// 依据所指定的ID号，重新获取相应Employee对象的实例      </span></div><div class="line">    <span class="function"><span class="keyword">public</span> Employee <span class="title">getEmployee</span><span class="params">(String ID)</span> </span>&#123;      </div><div class="line">       Employee em = <span class="keyword">null</span>;      </div><div class="line">       <span class="comment">// 缓存中是否有该Employee实例的软引用，如果有，从软引用中取得。      </span></div><div class="line">       <span class="keyword">if</span> (employeeRefs.containsKey(ID)) &#123;      </div><div class="line">           EmployeeRef ref = (EmployeeRef) employeeRefs.get(ID);      </div><div class="line">           em = (Employee) ref.get();      </div><div class="line">       &#125;      </div><div class="line">       <span class="comment">// 如果没有软引用，或者从软引用中得到的实例是null，重新构建一个实例，      </span></div><div class="line">       <span class="comment">// 并保存对这个新建实例的软引用      </span></div><div class="line">       <span class="keyword">if</span> (em == <span class="keyword">null</span>) &#123;      </div><div class="line">           em = <span class="keyword">new</span> Employee(ID);      </div><div class="line">           System.out.println(<span class="string">"Retrieve From EmployeeInfoCenter. ID="</span> + ID);      </div><div class="line">           <span class="keyword">this</span>.cacheEmployee(em);      </div><div class="line">       &#125;      </div><div class="line">       <span class="keyword">return</span> em;      </div><div class="line">    &#125;      </div><div class="line">       </div><div class="line">    <span class="comment">// 清除那些所软引用的Employee对象已经被回收的EmployeeRef对象      </span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">cleanCache</span><span class="params">()</span> </span>&#123;      </div><div class="line">       EmployeeRef ref = <span class="keyword">null</span>;      </div><div class="line">       <span class="keyword">while</span> ((ref = (EmployeeRef) q.poll()) != <span class="keyword">null</span>) &#123;      </div><div class="line">           employeeRefs.remove(ref._key);      </div><div class="line">       &#125;      </div><div class="line">    &#125;      </div><div class="line">       </div><div class="line">    <span class="comment">// 清除Cache内的全部内容      </span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clearCache</span><span class="params">()</span> </span>&#123;      </div><div class="line">       cleanCache();      </div><div class="line">       employeeRefs.clear();      </div><div class="line">       System.gc();      </div><div class="line">       System.runFinalization();      </div><div class="line">    &#125;      </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="8s-使用弱引用构建非敏感数据的缓存"><a href="#8s-使用弱引用构建非敏感数据的缓存" class="headerlink" title="8s 使用弱引用构建非敏感数据的缓存"></a>8s 使用弱引用构建非敏感数据的缓存</h2><h5 id="8-1-全局ap造成的内存泄漏"><a href="#8-1-全局ap造成的内存泄漏" class="headerlink" title="8.1 全局ap造成的内存泄漏"></a>8.1 全局ap造成的内存泄漏</h5><p>　　无意识对象保留最常见的原因是使用Map将元数据与临时对象（transient object）相关联。假定一个对象具有中等生命周期，比分配它的那个方法调用的生命周期长，但是比应用程序的生命周期短，如客户机的套接字连接。需要将 一些元数据与这个套接字关联，如生成连接的用户的标识。在创建Socket时是不知道这些信息的，并且不能将数据添加到Socket对象上，因为不能控制 Socket 类或者它的子类。这时，典型的方法就是在一个全局 Map 中存储这些信息，如下面的 SocketManager 类所示：使用一个全局 Map 将元数据关联到一个对象。</p>
<p>　　这种方法的问题是元数据的生命周期需要与套接字的生命周期挂钩，但是除非准确地知道什么时候程序不再需要这个套接字，并记住从 Map 中删除相应的映射，否则，Socket 和 User 对象将会永远留在 Map 中，远远超过响应了请求和关闭套接字的时间。这会阻止 Socket 和 User 对象被垃圾收集，即使应用程序不会再使用它们。这些对象留下来不受控制，很容易造成程序在长时间运行后内存爆满。除了最简单的情况，在几乎所有情况下找出 什么时候 Socket 不再被程序使用是一件很烦人和容易出错的任务，需要人工对内存进行管理。</p>
<h4 id="8-2-如何使用WeakHashMap"><a href="#8-2-如何使用WeakHashMap" class="headerlink" title="8.2 如何使用WeakHashMap"></a>8.2 如何使用WeakHashMap</h4><p>　　在Java集合中有一种特殊的Map类型—WeakHashMap，在这种Map中存放了键对象的弱引用，当一个键对象被垃圾回收器回收时，那么相应的值 对象的引用会从Map中删除。WeakHashMap能够节约存储空间，可用来缓存那些非必须存在的数据。关于Map接口的一般用法。</p>
<p>　　下面示例中MapCache类的main()方法创建了一个WeakHashMap对象，它存放了一组Key对象的弱引用，此外main()方法还创建了一个数组对象，它存放了部分Key对象的强引用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.WeakHashMap;      </div><div class="line">       </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Element</span> </span>&#123;      </div><div class="line">    <span class="keyword">private</span> String ident;      </div><div class="line">       </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Element</span><span class="params">(String id)</span> </span>&#123;      </div><div class="line">       ident = id;      </div><div class="line">    &#125;      </div><div class="line">       </div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;      </div><div class="line">       <span class="keyword">return</span> ident;      </div><div class="line">    &#125;      </div><div class="line">       </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;      </div><div class="line">       <span class="keyword">return</span> ident.hashCode();      </div><div class="line">    &#125;      </div><div class="line">       </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;      </div><div class="line">       <span class="keyword">return</span> obj <span class="keyword">instanceof</span> Element &amp;&amp; ident.equals(((Element) obj).ident);      </div><div class="line">    &#125;      </div><div class="line">          </div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">finalize</span><span class="params">()</span></span>&#123;      </div><div class="line">       System.out.println(<span class="string">"Finalizing "</span>+getClass().getSimpleName()+<span class="string">" "</span>+ident);      </div><div class="line">    &#125;      </div><div class="line">&#125;      </div><div class="line">       </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Key</span> <span class="keyword">extends</span> <span class="title">Element</span></span>&#123;      </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Key</span><span class="params">(String id)</span></span>&#123;      </div><div class="line">       <span class="keyword">super</span>(id);      </div><div class="line">    &#125;      </div><div class="line">&#125;      </div><div class="line">       </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Value</span> <span class="keyword">extends</span> <span class="title">Element</span></span>&#123;      </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Value</span> <span class="params">(String id)</span></span>&#123;      </div><div class="line">       <span class="keyword">super</span>(id);      </div><div class="line">    &#125;      </div><div class="line">&#125;      </div><div class="line">       </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CanonicalMapping</span> </span>&#123;      </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;      </div><div class="line">       <span class="keyword">int</span> size=<span class="number">1000</span>;      </div><div class="line">       Key[] keys=<span class="keyword">new</span> Key[size];      </div><div class="line">       WeakHashMap map=<span class="keyword">new</span> WeakHashMap();      </div><div class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt; SPAN&gt;    </div><div class="line">           Key k=<span class="keyword">new</span> Key(Integer.toString(i));      </div><div class="line">           Value v=<span class="keyword">new</span> Value(Integer.toString(i));      </div><div class="line">           <span class="keyword">if</span>(i%<span class="number">3</span>==<span class="number">0</span>)      </div><div class="line">              keys[i]=k;      </div><div class="line">           map.put(k, v);      </div><div class="line">       &#125;      </div><div class="line">       System.gc();      </div><div class="line">    &#125;      </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>　　从打印结果可以看出，当执行System.gc()方法后，垃圾回收器只会回收那些仅仅持有弱引用的Key对象。id可以被3整除的Key对象持有强引用，因此不会被回收。</p>
<h4 id="8-3-用-WeakHashMap-堵住泄漏"><a href="#8-3-用-WeakHashMap-堵住泄漏" class="headerlink" title="8.3 用 WeakHashMap 堵住泄漏"></a>8.3 用 WeakHashMap 堵住泄漏</h4><p>　　在 SocketManager 中防止泄漏很容易，只要用 WeakHashMap 代替 HashMap 就行了。（这里假定SocketManager不需要线程安全）。当映射的生命周期必须与键的生命周期联系在一起时，可以使用这种方法。用 WeakHashMap修复 SocketManager。</p>
<h4 id="8-4-配合使用引用队列"><a href="#8-4-配合使用引用队列" class="headerlink" title="8.4 配合使用引用队列"></a>8.4 配合使用引用队列</h4><p>　　WeakHashMap 用弱引用承载映射键，这使得应用程序不再使用键对象时它们可以被垃圾收集，get() 实现可以根据 WeakReference.get() 是否返回 null 来区分死的映射和活的映射。但是这只是防止 Map 的内存消耗在应用程序的生命周期中不断增加所需要做的工作的一半，还需要做一些工作以便在键对象被收集后从 Map 中删除死项。否则，Map 会充满对应于死键的项。虽然这对于应用程序是不可见的，但是它仍然会造成应用程序耗尽内存。 </p>
<p>　　引用队列是垃圾收集器向应用程序返回关于对象生命周期的信息的主要方法。弱引用有个构造函数取引用队列作为参数。如果用关联的引用队列创建弱引用，在弱引用对象成为 GC 候选对象时，这个引用对象就在引用清除后加入到引用队列中（具体参考上文软引用示例）。</p>
<p>　　WeakHashMap 有一个名为 expungeStaleEntries() 的私有方法，大多数 Map 操作中会调用它，它去掉引用队列中所有失效的引用，并删除关联的映射。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/11/Java输入输出流/" itemprop="url">
                  Java输入输出流
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-11T14:56:05+08:00" content="2016-09-11">
              2016-09-11
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java-基础/" itemprop="url" rel="index">
                    <span itemprop="name">java_基础</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-什么是IO"><a href="#1-什么是IO" class="headerlink" title="1 什么是IO"></a>1 什么是IO</h2><p>　　Java中I/O操作主要是指使用Java进行输入，输出操作. Java所有的I/O机制都是基于数据流进行输入输出，这些数据流表示了字符或者字节数据的流动序列。Java的I/O流提供了读写数据的标准方法。任何Java中表示数据源的对象都会提供以数据流的方式读写它的数据的方法。  </p>
<p>　　Java.io是大多数面向数据流的输入/输出类的主要软件包。此外，Java也对块传输提供支持，在核心库 java.nio中采用的便是块IO。</p>
<p>　　IO的好处是简单易用，缺点是效率较低。块IO效率很高，但编程比较复杂。 </p>
<p>　　Java IO模型：<br>　　Java的IO模型设计非常优秀，它使用Decorator模式，按功能划分Stream，您可以动态装配这些Stream，以便获得您需要的功能。例如，您需要一个具有缓冲的文件输入流，则应当组合使用FileInputStream和BufferedInputStream。 </p>
<h2 id="2-数据流的基本概念"><a href="#2-数据流的基本概念" class="headerlink" title="2 数据流的基本概念"></a>2 数据流的基本概念</h2><p>数据流是一串连续不断的数据的集合，就象水管里的水流，在水管的一端一点一点地供水，而在水管的另一端看到的是一股连续不断的水流。数据写入程序可以是一段、一段地向数据流管道中写入数据，这些数据段会按先后顺序形成一个长的数据流。对数据读取程序来说，看不到数据流在写入时的分段情况，每次可以读取其中的任意长度的数据，但只能先读取前面的数据后，再读取后面的数据。不管写入时是将数据分多次写入，还是作为一个整体一次写入，读取时的效果都是完全一样的。 </p>
<p><strong>“流是磁盘或其它外围设备中存储的数据的源点或终点。”</strong></p>
<p>　　在电脑上的数据有三种存储方式，一种是外存，一种是内存，一种是缓存。比如电脑上的硬盘，磁盘，U盘等都是外存，在电脑上有内存条，缓存是在CPU里面的。外存的存储量最大，其次是内存，最后是缓存，但是外存的数据的读取最慢，其次是内存，缓存最快。这里总结从外存读取数据到内存以及将数据从内存写到外存中。对于内存和外存的理解，我们可以简单的理解为容器，即外存是一个容器，内存又是另外一个容器。那又怎样把放在外存这个容器内的数据读取到内存这个容器以及怎么把内存这个容器里的数据存到外存中呢？</p>
<p>　　<strong>Java类库中，IO部分的内容是很庞大的，因为它涉及的领域很广泛:</strong></p>
<p>　　<strong>标准输入输出，文件的操作，网络上的数据流，字符串流，对象流，zip文件流等等，java中将输入输出抽象称为流</strong>，就好像水管，将两个容器连接起来。将数据冲外存中读取到内存中的称为输入流，将数据从内存写入外存中的称为输出流。</p>
<p>　　流是一个很形象的概念，当程序需要读取数据的时候，就会开启一个通向数据源的流，这个数据源可以是文件，内存，或是网络连接。类似的，当程序需要写入数据的时候，就会开启一个通向目的地的流。</p>
<p>　　<strong>总结的基本概念如下：</strong></p>
<h4 id="2-1-数据流"><a href="#2-1-数据流" class="headerlink" title="2.1 数据流"></a>2.1 数据流</h4><p>　　一组有序，有起点和终点的字节的数据序列。包括输入流和输出流。</p>
<p><img src="http://7xu1cb.com1.z0.glb.clouddn.com/1355473547_6986.jpg" alt="数据流"></p>
<h4 id="2-2-输入流"><a href="#2-2-输入流" class="headerlink" title="2.2 输入流"></a>2.2 输入流</h4><p>　　程序从输入流读取数据源。数据源包括外界(键盘、文件、网络…)，即是将数据源读入到程序的通信通道</p>
<p><img src="http://7xu1cb.com1.z0.glb.clouddn.com/%E8%BE%93%E5%85%A5%E6%B5%81.jpg" alt="输入流"></p>
<h4 id="2-3-输出流"><a href="#2-3-输出流" class="headerlink" title="2.3 输出流"></a>2.3 输出流</h4><p>　　程序向输出流写入数据。将程序中的数据输出到外界（显示器、打印机、文件、网络…）的通信通道。</p>
<p><img src="http://7xu1cb.com1.z0.glb.clouddn.com/%E8%BE%93%E5%87%BA%E6%B5%81.jpg" alt="输出流"></p>
<p>　　采用数据流的目的就是使得输出输入独立于设备。</p>
<ul>
<li>Input Stream不关心数据源来自何种设备（键盘，文件，网络）</li>
<li>Output Stream不关心数据的目的是何种设备（键盘，文件，网络）</li>
</ul>
<h4 id="2-4-数据流分类"><a href="#2-4-数据流分类" class="headerlink" title="2.4 数据流分类"></a>2.4 数据流分类</h4><p>　　流序列中的数据既可以是未经加工的原始二进制数据，也可以是经一定编码处理后符合某种格式规定的特定数据。因此Java中的流分为两种：</p>
<ul>
<li>字节流：数据流中最小的数据单元是字节</li>
<li>字符流：数据流中最小的数据单元是字符， Java中的字符是Unicode编码，一个字符占用两个字节。</li>
</ul>
<h2 id="3-标准I-O"><a href="#3-标准I-O" class="headerlink" title="3 标准I/O"></a>3 标准I/O</h2><p>　　Java程序可通过命令行参数与外界进行简短的信息交换，同时，也规定了与标准输入、输出设备，如键盘、显示器进行信息交换的方式。而通过文件可以与外界进行任意数据形式的信息交换。</p>
<h4 id="3-1-命令行参数"><a href="#3-1-命令行参数" class="headerlink" title="3.1 命令行参数"></a>3.1 命令行参数</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestArgs</span> </span>&#123;  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;  </div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; args.length; i++) &#123;  </div><div class="line">            System.out.println(<span class="string">"args["</span> + i + <span class="string">"] is &lt;"</span> + args[i] + <span class="string">"&gt;"</span>);  </div><div class="line">        &#125;  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>运行命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">java Java C VB</div></pre></td></tr></table></figure>
<p><strong>运行结果：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">args[0] is &lt;Java&gt;</div><div class="line">args[1] is &lt;C&gt;</div><div class="line">args[2] is &lt;VB&gt;</div></pre></td></tr></table></figure>
<h4 id="3-2-标准输入，输出数据流"><a href="#3-2-标准输入，输出数据流" class="headerlink" title="3.2 标准输入，输出数据流"></a>3.2 标准输入，输出数据流</h4><p>java系统自带的标准数据流：java.lang.System:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">java.lang.System   </div><div class="line">public final class System  extends Object&#123;   </div><div class="line">   static  PrintStream  err;//标准错误流（输出）  </div><div class="line">   static  InputStream  in;//标准输入(键盘输入流)  </div><div class="line">   static  PrintStream  out;//标准输出流(显示器输出流)  </div><div class="line">&#125; </div><div class="line">``` </div><div class="line"></div><div class="line">注意：</div><div class="line">1. System类不能创建对象，只能直接使用它的三个静态成员。</div><div class="line">1. 每当main方法被执行时,就自动生成上述三个对象。</div><div class="line"></div><div class="line">###### 3.2.1 标准输出流 System.out</div><div class="line"></div><div class="line">System.out向标准输出设备输出数据，其数据类型为PrintStream。方法：</div><div class="line"></div><div class="line">- Void print(参数)</div><div class="line">- Void println(参数)</div><div class="line"></div><div class="line">###### 3.2.2 标准输入流 System.in</div><div class="line"></div><div class="line">System.in读取标准输入设备数据（从标准输入获取数据，一般是键盘），其数 据类型为InputStream。方法：</div><div class="line"></div><div class="line">- int read()  //返回ASCII码。若,返回值=-1，说明没有读取到任何字节读取工作结束。</div><div class="line">- int read(byte[] b)//读入多个字节到缓冲区b中返回值是读入的字节数</div><div class="line"></div><div class="line">例如：</div><div class="line"></div><div class="line">``` java</div><div class="line">import java.io.*;  </div><div class="line">public class StandardInputOutput &#123;  </div><div class="line">    public static void main(String args[]) &#123;  </div><div class="line">        int b;  </div><div class="line">        try &#123;  </div><div class="line">            System.out.println("please Input:");  </div><div class="line">            while ((b = System.in.read()) != -1) &#123;  </div><div class="line">                System.out.print((char) b);  </div><div class="line">            &#125;  </div><div class="line">        &#125; catch (IOException e) &#123;  </div><div class="line">            System.out.println(e.toString());  </div><div class="line">        &#125;  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>等待键盘输入，键盘输入什么，就打印出什么：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">please Input:</div><div class="line">tokgoliang</div><div class="line">tokgoliang</div></pre></td></tr></table></figure>
<h6 id="3-2-3-标准错误流"><a href="#3-2-3-标准错误流" class="headerlink" title="3.2.3 标准错误流"></a>3.2.3 标准错误流</h6><p>System.err输出标准错误，其数据类型为PrintStream。可查阅API获得详细说明。</p>
<p>　　标准输出通过System.out调用println方法输出参数并换行，而print方法输出参数但不换行。println或print方法都通 过重载实现了输出基本数据类型的多个方法，包括输出参数类型为boolean、char、int、long、float和double。同时，也重载实现 了输出参数类型为char[]、String和Object的方法。其中，print（Object）和println（Object）方法在运行时将调 用参数Object的toString方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.BufferedReader;  </div><div class="line"><span class="keyword">import</span> java.io.IOException;  </div><div class="line"><span class="keyword">import</span> java.io.InputStreamReader;  </div><div class="line">  </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StandardInputOutput</span> </span>&#123;  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;  </div><div class="line">        String s;  </div><div class="line">        <span class="comment">// 创建缓冲区阅读器从键盘逐行读入数据  </span></div><div class="line">        InputStreamReader ir = <span class="keyword">new</span> InputStreamReader(System.in);  </div><div class="line">        BufferedReader in = <span class="keyword">new</span> BufferedReader(ir);  </div><div class="line">        System.out.println(<span class="string">"Unix系统: ctrl-d 或 ctrl-c 退出"</span>  </div><div class="line">                + <span class="string">"\nWindows系统: ctrl-z 退出"</span>);  </div><div class="line">        <span class="keyword">try</span> &#123;  </div><div class="line">            <span class="comment">// 读一行数据，并标准输出至显示器  </span></div><div class="line">            s = in.readLine();  </div><div class="line">            <span class="comment">// readLine()方法运行时若发生I/O错误，将抛出IOException异常  </span></div><div class="line">            <span class="keyword">while</span> (s != <span class="keyword">null</span>) &#123;  </div><div class="line">                System.out.println(<span class="string">"Read: "</span> + s);  </div><div class="line">                s = in.readLine();  </div><div class="line">            &#125;  </div><div class="line">            <span class="comment">// 关闭缓冲阅读器  </span></div><div class="line">            in.close();  </div><div class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123; <span class="comment">// Catch any IO exceptions.  </span></div><div class="line">            e.printStackTrace();  </div><div class="line">        &#125;  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="4-java-IO层次体系结构"><a href="#4-java-IO层次体系结构" class="headerlink" title="4 java.IO层次体系结构"></a>4 java.IO层次体系结构</h2><p>在整个Java.io包中最重要的就是5个类和一个接口。5个类指的是File、OutputStream、InputStream、Writer、Reader；一个接口指的是Serializable.掌握了这些IO的核心操作那么对于Java中的IO体系也就有了一个初步的认识了</p>
<p>Java I/O主要包括如下几个层次，包含三个部分：</p>
<ol>
<li>流式部分――IO的主体部分；</li>
<li>非流式部分――主要包含一些辅助流式部分的类，如：File类、RandomAccessFile类和FileDescriptor等类；</li>
<li>其他类–文件读取部分的与安全相关的类，如：SerializablePermission类，以及与本地操作系统相关的文件系统的类，如：FileSystem类和Win32FileSystem类和WinNTFileSystem类。</li>
</ol>
<p><strong>主要的类如下：</strong></p>
<ol>
<li>File（文件特征与管理）：用于文件或者目录的描述信息，例如生成新目录，修改文件名，删除文件，判断文件所在路径等。</li>
<li>InputStream（二进制格式操作）：抽象类，基于字节的输入操作，是所有输入流的父类。定义了所有输入流都具有的共同特征。</li>
<li>OutputStream（二进制格式操作）：抽象类。基于字节的输出操作。是所有输出流的父类。定义了所有输出流都具有的共同特征。<br><strong>Java中字符是采用Unicode标准，一个字符是16位，即一个字符使用两个字节来表示。为此，JAVA中引入了处理字符的流。</strong></li>
<li>Reader（文件格式操作）：抽象类，基于字符的输入操作。</li>
<li>Writer（文件格式操作）：抽象类，基于字符的输出操作。</li>
<li>RandomAccessFile（随机文件操作）：它的功能丰富，可以从文件的任意位置进行存取（输入输出）操作。</li>
</ol>
<p>Java中IO流的体系结构如图：<br><img src="http://7xu1cb.com1.z0.glb.clouddn.com/Java%E4%B8%ADIO%E6%B5%81%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84.jpg" alt="Java中IO流的体系结构"></p>
<h2 id="5-非流式文件类–File类"><a href="#5-非流式文件类–File类" class="headerlink" title="5 非流式文件类–File类"></a>5 非流式文件类–File类</h2><p>　　在Java语言的java.io包中，由File类提供了描述文件和目录的操作与管理方法。但File类不是InputStream、OutputStream或Reader、Writer的子类，因为它不负责数据的输入输出，而专门用来管理磁盘文件与目录。</p>
<p>作用：File类主要用于命名文件、查询文件属性和处理文件目录。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">File</span> <span class="keyword">extends</span> <span class="title">Object</span> <span class="keyword">implements</span> <span class="title">Serializable</span>,<span class="title">Comparable</span> </span>&#123;&#125;</div></pre></td></tr></table></figure>
<p>File类共提供了三个不同的构造函数，以不同的参数形式灵活地接收文件和目录名信息。构造函数：</p>
<p><strong>1）File (String   pathname)  </strong><br>　　例:File  f1=new File(“FileTest1.txt”); //创建文件对象f1，f1所指的文件是在当前目录下创建的FileTest1.txt<br><strong>2）File (String  parent  ,  String child)</strong><br>　　例:File f2=new  File(“D:\dir1”,”FileTest2.txt”) ;//  注意：D:\dir1目录事先必须存在，否则异常<br><strong>3）File (File    parent  , String child)</strong><br>　　例:File  f4=new File(“\dir3”);<br>　　File  f5=new File(f4,”FileTest5.txt”);  //在如果 \dir3目录不存在使用f4.mkdir()先创建一个对应于某磁盘文件或目录的File对象一经创建， 就可以通过调用它的方法来获得文件或目录的属性。    </p>
<ul>
<li>public boolean exists( ) 判断文件或目录是否存在</li>
<li>public boolean isFile( ) 判断是文件还是目录 </li>
<li>public boolean isDirectory( ) 判断是文件还是目录</li>
<li>public String getName( ) 返回文件名或目录名</li>
<li>public String getPath( ) 返回文件或目录的路径。</li>
<li>public long length( ) 获取文件的长度 </li>
<li>public String[ ] list ( ) 将目录中所有文件名保存在字符串数组中返回。<br>File类中还定义了一些对文件或目录进行管理、操作的方法，常用的方法有：</li>
<li>public boolean renameTo( File newFile );    重命名文件</li>
<li>public void delete( );   删除文件</li>
<li>public boolean mkdir( ); 创建目录</li>
</ul>
<p>例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.File;  </div><div class="line"><span class="keyword">import</span> java.io.IOException;  </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestFile</span> </span>&#123;  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> <span class="keyword">throws</span> IOException </span>&#123;  </div><div class="line">        File dir = <span class="keyword">new</span> File(<span class="string">"\\root"</span>);  </div><div class="line">        File f1 = <span class="keyword">new</span> File(dir, <span class="string">"fileOne.txt"</span>);  </div><div class="line">        File f2 = <span class="keyword">new</span> File(dir, <span class="string">"fileTwo.java"</span>);  </div><div class="line">        <span class="comment">// 文件对象创建后，指定的文件或目录不一定物理上存在  </span></div><div class="line">        <span class="keyword">if</span> (!dir.exists())  </div><div class="line">            dir.mkdir();  </div><div class="line">        <span class="keyword">if</span> (!f1.exists())  </div><div class="line">            f1.createNewFile();  </div><div class="line">        <span class="keyword">if</span> (!f2.exists())  </div><div class="line">            f2.createNewFile();  </div><div class="line">        System.out.println(<span class="string">"f1's AbsolutePath=  "</span> + f1.getAbsolutePath());  </div><div class="line">        System.out.println(<span class="string">"f1 Canread="</span> + f1.canRead());  </div><div class="line">        System.out.println(<span class="string">"f1's len= "</span> + f1.length());  </div><div class="line">        String[] FL;  </div><div class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;  </div><div class="line">        FL = dir.list();  </div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; FL.length; i++) &#123;  </div><div class="line">            count++;  </div><div class="line">            System.out.println(FL[i] + <span class="string">"is in \\root"</span>);  </div><div class="line">        &#125;  </div><div class="line">        System.out.println(<span class="string">"there are"</span> + count + <span class="string">"file in //root"</span>);  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>说明：File类的方法:</p>
<ul>
<li>exists()测试磁盘中指定的文件或目录是否存在</li>
<li>mkdir()创建文件对象指定的目录（单层目录）</li>
<li>createNewFile()创建文件对象指定的文件</li>
<li>list()返回目录中所有文件名字符串</li>
</ul>
<h2 id="6-Java-IO流类库"><a href="#6-Java-IO流类库" class="headerlink" title="6 Java.IO流类库"></a>6 Java.IO流类库</h2><h4 id="6-1-io流的四个基本类"><a href="#6-1-io流的四个基本类" class="headerlink" title="6.1 io流的四个基本类"></a>6.1 io流的四个基本类</h4><p>　　java.io包中包含了流式I/O所需要的所有类。在java.io包中有四个基本类：InputStream、OutputStream及Reader、Writer类，它们分别处理字节流和字符流：</p>
<table>
<thead>
<tr>
<th>输入/输出</th>
<th>字节流</th>
<th>字符流</th>
</tr>
</thead>
<tbody>
<tr>
<td>输入流</td>
<td>Inputstream</td>
<td>Reader</td>
</tr>
<tr>
<td>输出流</td>
<td>OutputStream</td>
<td>Writer</td>
</tr>
</tbody>
</table>
<p><img src="http://7xu1cb.com1.z0.glb.clouddn.com/IO%E6%A1%86%E6%9E%B6.jpg" alt="IO框架"></p>
<p>　　JDK1.4版本开始引入了新I/O类库，它位于java.nio包中，新I/O类库利用通道和缓冲区等来提高I/O操作的效率。</p>
<p>　　在java.io包中， java.io.InputStream 表示字节输入流， java.io.OutputStream表示字节输出流，处于java.io包最顶层。这两个类均为抽象类，也就是说它们不能被实例化，必须生成子类之后才能实现一定的功能。</p>
<h4 id="6-2-io流的具体分类"><a href="#6-2-io流的具体分类" class="headerlink" title="6.2 io流的具体分类"></a>6.2 io流的具体分类</h4><p><strong>按I/O类型来总体分类：</strong></p>
<ul>
<li><p>Memory<br>　　1）从/向内存数组读写数据: CharArrayReader、 CharArrayWriter、ByteArrayInputStream、ByteArrayOutputStream<br>　　2）从/向内存字符串读写数据 StringReader、StringWriter、StringBufferInputStream</p>
</li>
<li><p>Pipe管道  实现管道的输入和输出（进程间通信）: PipedReader、PipedWriter、PipedInputStream、PipedOutputStream</p>
</li>
<li><p>File 文件流。对文件进行读、写操作 ：FileReader、FileWriter、FileInputStream、FileOutputStream</p>
</li>
<li><p>ObjectSerialization 对象输入、输出 ：ObjectInputStream、ObjectOutputStream</p>
</li>
<li><p>DataConversion数据流 按基本数据类型读、写（处理的数据是Java的基本类型（如布尔型，字节，整数和浮点数））：DataInputStream、DataOutputStream</p>
</li>
<li><p>Printing 包含方便的打印方法 ：PrintWriter、PrintStream</p>
</li>
<li><p>Buffering缓冲  在读入或写出时，对数据进行缓存，以减少I/O的次数：BufferedReader、BufferedWriter、BufferedInputStream、BufferedOutputStream</p>
</li>
<li><p>Filtering 滤流，在数据进行读或写时进行过滤：FilterReader、FilterWriter、FilterInputStream、FilterOutputStream过</p>
</li>
<li><p>Concatenation合并输入 把多个输入流连接成一个输入流 ：SequenceInputStream </p>
</li>
<li><p>Counting计数  在读入数据时对行记数 ：LineNumberReader、LineNumberInputStream</p>
</li>
<li><p>Peeking Ahead 通过缓存机制，进行预读 ：PushbackReader、PushbackInputStream</p>
</li>
<li><p>Converting between Bytes and Characters 按照一定的编码/解码标准将字节流转换为字符流，或进行反向转换（Stream到Reader,Writer的转换类）：InputStreamReader、OutputStreamWriter</p>
</li>
</ul>
<p><strong>按数据来源（去向）分类：</strong></p>
<ul>
<li>File（文件）： FileInputStream, FileOutputStream, FileReader, FileWriter </li>
<li>byte[]：ByteArrayInputStream, ByteArrayOutputStream </li>
<li>Char[]: CharArrayReader, CharArrayWriter </li>
<li>String: StringBufferInputStream, StringReader, StringWriter </li>
<li>网络数据流：InputStream, OutputStream, Reader, Writer </li>
</ul>
<h2 id="7-字节流InputStream-OutputStream"><a href="#7-字节流InputStream-OutputStream" class="headerlink" title="7 字节流InputStream/OutputStream"></a>7 字节流InputStream/OutputStream</h2><h4 id="7-1-InputStream抽象类"><a href="#7-1-InputStream抽象类" class="headerlink" title="7.1 InputStream抽象类"></a>7.1 InputStream抽象类</h4><p>　　InputStream 为字节输入流，它本身为一个抽象类，必须依靠其子类实现各种功能，此抽象类是表示字节输入流的所有类的超类。 继承自InputStream  的流都是向程序中输入数据的，且数据单位为字节（8bit）；</p>
<p>　　InputStream是输入字节数据用的类，所以InputStream类提供了3种重载的read方法.Inputstream类中的常用方法： </p>
<ul>
<li>public abstract int read( )：读取一个byte的数据，返回值是高位补0的int类型值。若返回值=-1说明没有读取到任何字节读取工作结束。</li>
<li>public int read(byte b[ ])：读取b.length个字节的数据放到b数组中。返回值是读取的字节数。该方法实际上是调用下一个方法实现的 </li>
<li>public int read(byte b[ ], int off, int len)：从输入流中最多读取len个字节的数据，存放到偏移量为off的b数组中。 </li>
<li>public int available( )：返回输入流中可以读取的字节数。注意：若输入阻塞，当前线程将被挂起，如果InputStream对象调用这个方法的话，它只会返回0，这个方法必须由继承InputStream类的子类对象调用才有用， </li>
<li>public long skip(long n)：忽略输入流中的n个字节，返回值是实际忽略的字节数, 跳过一些字节来读取 </li>
<li>public int close( ) ：我们在使用完后，必须对我们打开的流进行关闭. </li>
</ul>
<p><strong>主要的子类：</strong></p>
<ul>
<li>FileInputStream把一个文件作为InputStream，实现对文件的读取操作     </li>
<li>ByteArrayInputStream：把内存中的一个缓冲区作为InputStream使用 </li>
<li>StringBufferInputStream：把一个String对象作为InputStream </li>
<li>PipedInputStream：实现了pipe的概念，主要在线程中使用 </li>
<li>SequenceInputStream：把多个InputStream合并为一个InputStream </li>
</ul>
<h4 id="7-2-OutputStream抽象类"><a href="#7-2-OutputStream抽象类" class="headerlink" title="7.2 OutputStream抽象类"></a>7.2 OutputStream抽象类</h4><p>　　OutputStream提供了3个write方法来做数据的输出，这个是和InputStream是相对应的。 </p>
<ul>
<li>public void write(byte b[ ])：将参数b中的字节写到输出流。 </li>
<li>public void write(byte b[ ], int off, int len) ：将参数b的从偏移量off开始的len个字节写到输出流。 </li>
<li>public abstract void write(int b) ：先将int转换为byte类型，把低字节写入到输出流中。 </li>
<li>public void flush( ) : 将数据缓冲区中数据全部输出，并清空缓冲区。 </li>
<li>public void close( ) : 关闭输出流并释放与流相关的系统资源。 </li>
</ul>
<p>主要的子类：</p>
<p>ByteArrayOutputStream：把信息存入内存中的一个缓冲区中<br>FileOutputStream：把信息存入文件中<br>PipedOutputStream：实现了pipe的概念，主要在线程中使用<br>SequenceOutputStream：把多个OutStream合并为一个OutStream </p>
<p>流结束的判断：方法read()的返回值为-1时；readLine()的返回值为null时。</p>
<h4 id="7-3-文件输入流：-FileInputStream类"><a href="#7-3-文件输入流：-FileInputStream类" class="headerlink" title="7.3 文件输入流： FileInputStream类"></a>7.3 文件输入流： FileInputStream类</h4><p>　　FileInputStream可以使用read()方法一次读入一个字节，并以int类型返回，或者是使用read()方法时读入至一个byte数组，byte数组的元素有多少个，就读入多少个字节。在将整个文件读取完成或写入完毕的过程中，这么一个byte数组通常被当作缓冲区，因为这么一个byte数组通常扮演承接数据的中间角色。</p>
<p>作用：以文件作为数据输入源的数据流。或者说是打开文件，从文件读数据到内存的类。<br>使用方法(1)<br>File  fin=new File(“d:/abc.txt”);<br>FileInputStream in=new FileInputStream( fin);<br>使用方法(2)<br>FileInputStream  in=new  FileInputStream(“d: /abc.txt”);</p>
<p>程序举例：将InputFromFile.java的程序的内容显示在显示器上</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.IOException;  </div><div class="line"><span class="keyword">import</span> java.io.FileInputStream;  </div><div class="line">;  </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestFile</span> </span>&#123;  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> <span class="keyword">throws</span> IOException </span>&#123;  </div><div class="line">        <span class="keyword">try</span>&#123;      </div><div class="line">               FileInputStream rf=<span class="keyword">new</span>   FileInputStream(<span class="string">"InputFromFile.java"</span>);  </div><div class="line">               <span class="keyword">int</span> n=<span class="number">512</span>;   <span class="keyword">byte</span>  buffer[]=<span class="keyword">new</span>  <span class="keyword">byte</span>[n];     </div><div class="line">               <span class="keyword">while</span>((rf.read(buffer,<span class="number">0</span>,n)!=-<span class="number">1</span>)&amp;&amp;(n&gt;<span class="number">0</span>))&#123;  </div><div class="line">                   System.out.println(<span class="keyword">new</span> String(buffer) );  </div><div class="line">                &#125;  </div><div class="line">                System.out.println();  </div><div class="line">                rf.close();  </div><div class="line">        &#125; <span class="keyword">catch</span>(IOException  IOe)&#123;        </div><div class="line">              System.out.println(IOe.toString());  </div><div class="line">        &#125;  </div><div class="line">  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="7-4-文件输出流-FileOutputStream类"><a href="#7-4-文件输出流-FileOutputStream类" class="headerlink" title="7.4 文件输出流:FileOutputStream类"></a>7.4 文件输出流:FileOutputStream类</h4><p>作用：用来处理以文件作为数据输出目的数据流；或者说是从内存区读数据入文件</p>
<p>FileOutputStream类用来处理以文件作为数据输出目的数据流；一个表示文件名的字符串，也可以是File或FileDescriptor对象。 </p>
<p>创建一个文件流对象有两种方法：<br>方式1：<br>File   f=new  File (“d:/myjava/write.txt “);<br>FileOutputStream  out= new FileOutputStream (f);<br>　　<br>方式2：<br>FileOutputStream out=new FileOutputStream(“d:/myjava/write.txt “);<br>　　<br>方式3：构造函数将 FileDescriptor()对象作为其参数。<br>FileDescriptor() fd=new FileDescriptor();<br>FileOutputStream f2=new FileOutputStream(fd);<br>　　<br>方式4：构造函数将文件名作为其第一参数，将布尔值作为第二参数。<br>FileOutputStream f=new FileOutputStream(“d:/abc.txt”,true); </p>
<p><strong>注意： （1）文件中写数据时，若文件已经存在，则覆盖存在的文件；（2）的读/写操作结束时，应调用close方法关闭流。</strong> </p>
<p>程序举例：使用键盘输入一段文章，将文章保存在文件write.txt中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.IOException;  </div><div class="line"><span class="keyword">import</span> java.io.FileOutputStream;  </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestFile</span> </span>&#123;  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> <span class="keyword">throws</span> IOException </span>&#123;  </div><div class="line">        <span class="keyword">try</span> &#123;  </div><div class="line">            System.out.println(<span class="string">"please Input from      Keyboard"</span>);  </div><div class="line">            <span class="keyword">int</span> count, n = <span class="number">512</span>;  </div><div class="line">            <span class="keyword">byte</span> buffer[] = <span class="keyword">new</span> <span class="keyword">byte</span>[n];  </div><div class="line">            count = System.in.read(buffer);  </div><div class="line">            FileOutputStream wf = <span class="keyword">new</span> FileOutputStream(<span class="string">"d:/myjava/write.txt"</span>);  </div><div class="line">            wf.write(buffer, <span class="number">0</span>, count);  </div><div class="line">            wf.close(); <span class="comment">// 当流写操作结束时，调用close方法关闭流。  </span></div><div class="line">            System.out.println(<span class="string">"Save to the write.txt"</span>);  </div><div class="line">        &#125; <span class="keyword">catch</span> (IOException IOe) &#123;  </div><div class="line">            System.out.println(<span class="string">"File Write Error!"</span>);  </div><div class="line">        &#125;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="7-5-FileInputStream流和FileOutputStream的应用"><a href="#7-5-FileInputStream流和FileOutputStream的应用" class="headerlink" title="7.5 FileInputStream流和FileOutputStream的应用"></a>7.5 FileInputStream流和FileOutputStream的应用</h4><p>利用程序将文件file1.txt 拷贝到file2.txt中。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.File;  </div><div class="line"><span class="keyword">import</span> java.io.IOException;  </div><div class="line"><span class="keyword">import</span> java.io.FileOutputStream;  </div><div class="line"><span class="keyword">import</span> java.io.FileInputStream;  </div><div class="line">  </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestFile</span> </span>&#123;  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> <span class="keyword">throws</span> IOException </span>&#123;  </div><div class="line">        <span class="keyword">try</span> &#123;  </div><div class="line">            File inFile = <span class="keyword">new</span> File(<span class="string">"copy.java"</span>);  </div><div class="line">            File outFile = <span class="keyword">new</span> File(<span class="string">"copy2.java"</span>);  </div><div class="line">            FileInputStream finS = <span class="keyword">new</span> FileInputStream(inFile);  </div><div class="line">            FileOutputStream foutS = <span class="keyword">new</span> FileOutputStream(outFile);  </div><div class="line">            <span class="keyword">int</span> c;  </div><div class="line">            <span class="keyword">while</span> ((c = finS.read()) != -<span class="number">1</span>) &#123;  </div><div class="line">                foutS.write(c);  </div><div class="line">            &#125;  </div><div class="line">            finS.close();  </div><div class="line">            foutS.close();  </div><div class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;  </div><div class="line">            System.err.println(<span class="string">"FileStreamsTest: "</span> + e);  </div><div class="line">        &#125;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="7-6-缓冲输入输出流-BufferedInputStream-BufferedOutputStream"><a href="#7-6-缓冲输入输出流-BufferedInputStream-BufferedOutputStream" class="headerlink" title="7.6 缓冲输入输出流 BufferedInputStream/ BufferedOutputStream"></a>7.6 缓冲输入输出流 BufferedInputStream/ BufferedOutputStream</h4><p>　　计算机访问外部设备非常耗时。访问外存的频率越高，造成CPU闲置的概率就越大。为了减少访问外存的次数，应该在一次对外设的访问中，读写更多的数据。为此，除了程序和流节点间交换数据必需的读写机制外，还应该增加缓冲机制。缓冲流就是每一个数据流分配一个缓冲区，一个缓冲区就是一个临时存储数据的内存。这样可以减少访问硬盘的次数,提高传输效率。</p>
<p>　　BufferedInputStream:当向缓冲流写入数据时候，数据先写到缓冲区，待缓冲区写满后，系统一次性将数据发送给输出设备。</p>
<p>　　BufferedOutputStream :当从向缓冲流读取数据时候，系统先从缓冲区读出数据，待缓冲区为空时，系统再从输入设备读取数据到缓冲区。</p>
<p>1）将文件读入内存：<br>将BufferedInputStream与FileInputStream相接<br>FileInputStream in=new  FileInputStream( “file1.txt ” );<br>BufferedInputStream bin=new  BufferedInputStream( in); </p>
<p>2）将内存写入文件：<br>将BufferedOutputStream与 FileOutputStream相接<br>FileOutputStreamout=new FileOutputStream(“file1.txt”);<br>BufferedOutputStream  bin=new BufferedInputStream(out);</p>
<p>3）键盘输入流读到内存<br>将BufferedReader与标准的数据流相接<br>InputStreamReader sin=new InputStreamReader (System.in) ；<br>BufferedReader bin=new             BufferedReader(sin);</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.*;  </div><div class="line">  </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReadWriteToFile</span> </span>&#123;  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> <span class="keyword">throws</span> IOException </span>&#123;  </div><div class="line">        InputStreamReader sin = <span class="keyword">new</span> InputStreamReader(System.in);  </div><div class="line">        BufferedReader bin = <span class="keyword">new</span> BufferedReader(sin);  </div><div class="line">        FileWriter out = <span class="keyword">new</span> FileWriter(<span class="string">"myfile.txt"</span>);  </div><div class="line">        BufferedWriter bout = <span class="keyword">new</span> BufferedWriter(out);  </div><div class="line">        String s;  </div><div class="line">        <span class="keyword">while</span> ((s = bin.readLine()).length() &gt; <span class="number">0</span>) &#123;  </div><div class="line">            bout.write(s, <span class="number">0</span>, s.length());  </div><div class="line">        &#125;  </div><div class="line">  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>程序说明：<br>从键盘读入字符，并写入到文件中BufferedReader类的方法：String readLine()<br>作用：读一行字符串，以回车符为结束。<br>BufferedWriter类的方法：bout.write(String s,offset,len)<br>作用：从缓冲区将字符串s从offset开始，len长度的字符串写到某处。</p>
<ol>
<li>字符流Writer/Reader<pre><code>Java中字符是采用Unicode标准，一个字符是16位，即一个字符使用两个字节来表示。为此，JAVA中引入了处理字符的流。
</code></pre></li>
</ol>
<ol>
<li>Reader抽象类<br> 用于读取字符流的抽象类。子类必须实现的方法只有 read(char[], int, int) 和 close()。但是，多数子类将重写此处定义的一些方法，以提供更高的效率和/或其他功能。</li>
</ol>
<pre><code>1) FileReader :与FileInputStream对应  
   主要用来读取字符文件，使用缺省的字符编码，有三种构造函数： 
</code></pre><p>　　    (1）将文件名作为字符串 ：FileReader f=new FileReader(“c:/temp.txt”);<br>　　    (2）构造函数将File对象作为其参数。<br>　　            File f=new file(“c:/temp.txt”);<br>　　            FileReader f1=new FileReader(f);<br>　　   (3)  构造函数将FileDescriptor对象作为参数<br>　　          FileDescriptor() fd=new FileDescriptor()<br>　　          FileReader f2=new FileReader(fd);<br>               (1) 用指定字符数组作为参数：CharArrayReader(char[])<br>               (2) 将字符数组作为输入流:CharArrayReader(char[], int, int)<br>　         读取字符串，构造函数如下： public StringReader(String s);<br>        2) CharArrayReader：与ByteArrayInputStream对应<br>　　3) StringReader : 与StringBufferInputStream对应<br>　　4) InputStreamReader<br>　　      从输入流读取字节，在将它们转换成字符:Public inputstreamReader(inputstream is);<br>　　5) FilterReader: 允许过滤字符流<br>　　      protected filterReader(Reader r);<br>　　6) BufferReader :接受Reader对象作为参数，并对其添加字符缓冲器，使用readline()方法可以读取一行。<br>　　   Public BufferReader(Reader r); </p>
<pre><code>主要方法：

(1)  public int read() throws IOException; //读取一个字符，返回值为读取的字符 
</code></pre><p>　　(2)  public int read(char cbuf[]) throws IOException; /<em>读取一系列字符到数组cbuf[]中，返回值为实际读取的字符的数量</em>/<br>　　(3)  public abstract int read(char cbuf[],int off,int len) throws IOException;<br>　　/<em>读取len个字符，从数组cbuf[]的下标off处开始存放，返回值为实际读取的字符数量，该方法必须由子类实现</em>/ </p>
<ol>
<li>Writer抽象类<br>  写入字符流的抽象类。子类必须实现的方法仅有 write(char[], int, int)、flush() 和 close()。但是，多数子类将重写此处定义的一些方法，以提供更高的效率和/或其他功能。 其子类如下：</li>
</ol>
<pre><code>1） FileWrite: 与FileOutputStream对应  
</code></pre><p>　　将字符类型数据写入文件，使用缺省字符编码和缓冲器大小。<br>　　Public FileWrite(file f);<br>　　2)  chararrayWrite:与ByteArrayOutputStream对应 ,将字符缓冲器用作输出。<br>　　    Public CharArrayWrite();<br>　　3) PrintWrite:生成格式化输出<br>　　    public PrintWriter(outputstream os);<br>　　4) filterWriter:用于写入过滤字符流<br>　　    protected FilterWriter(Writer w);<br>　　5) PipedWriter：与PipedOutputStream对应   </p>
<pre><code>6) StringWriter：无与之对应的以字节为导向的stream  

主要方法：
</code></pre><p>　　(1)  public void write(int c) throws IOException； //将整型值c的低16位写入输出流<br>　　(2)  public void write(char cbuf[]) throws IOException； //将字符数组cbuf[]写入输出流<br>　　(3)  public abstract void write(char cbuf[],int off,int len) throws IOException； //将字符数组cbuf[]中的从索引为off的位置处开始的len个字符写入输出流<br>　　(4)  public void write(String str) throws IOException； //将字符串str中的字符写入输出流<br>　　(5)  public void write(String str,int off,int len) throws IOException； //将字符串str 中从索引off开始处的len个字符写入输出流<br>　　(6)  flush( ) //刷空输出流，并输出所有被缓存的字节。<br>　　(7)close()    关闭流 public abstract void close() throws IOException</p>
<p>3 .InputStream与Reader差别 OutputStream与Writer差别<br>InputStream和OutputStream类处理的是字节流，数据流中的最小单位是字节(8个bit)<br>Reader与Writer处理的是字符流，在处理字符流时涉及了字符编码的转换问题</p>
<p>[java] view plain copy print?<br>import java.io.*;<br>public class EncodeTest {<br>    private static void readBuff(byte [] buff) throws IOException {<br>       ByteArrayInputStream in =new ByteArrayInputStream(buff);<br>        int data;<br>        while((data=in.read())!=-1)   System.out.print(data+”  “);<br>        System.out.println();     in.close();     }  </p>
<p>   public static void main(String args[]) throws IOException {<br>       System.out.println(“内存中采用unicode字符编码：” );<br>       char   c=’好’;<br>       int lowBit=c&0xFF;     int highBit=(c&amp;0xFF00)&gt;&gt;8;<br>       System.out.println(“”+lowBit+”   “+highBit);<br>       String s=”好”;<br>       System.out.println(“本地操作系统默认字符编码：”);<br>       readBuff(s.getBytes());<br>       System.out.println(“采用GBK字符编码：”);<br>       readBuff(s.getBytes(“GBK”));<br>       System.out.println(“采用UTF-8字符编码：”);<br>       readBuff(s.getBytes(“UTF-8”));      }<br>}  </p>
<p>Reader类能够将输入流中采用其他编码类型的字符转换为Unicode字符，然后在内存中为其分配内存<br>Writer类能够将内存中的Unicode字符转换为其他编码类型的字符，再写到输出流中。</p>
<ol>
<li>IOException异常类的子类<br>1.public class  EOFException ：<br>非正常到达文件尾或输入流尾时，抛出这种类型的异常。<br>2.public class FileNotFoundException：<br>当文件找不到时，抛出的异常。<br>3.public class InterruptedIOException：<br>当I/O操作被中断时，抛出这种类型的异常。</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/11/java中Date, DateFormat的一些方法总结/" itemprop="url">
                  java中Date, DateFormat的一些方法总结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-11T10:34:07+08:00" content="2016-09-11">
              2016-09-11
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java-基础/" itemprop="url" rel="index">
                    <span itemprop="name">java_基础</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://blog.csdn.net/woshisap/article/details/6617118/" target="_blank" rel="external">TokgoLiang——转载别人的原文链接一定要写在开头</a></p>
<p><strong>DateDemo1.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* </span></div><div class="line"> * 取得系统的时间 </div><div class="line"> */  </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DateDemo1</span> </span>&#123;  </div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;  </div><div class="line">		System.out.println(System.currentTimeMillis());  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>输出为：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">1311060393171</span></div></pre></td></tr></table></figure></p>
<p>　　执行结果会显示从1970年1月1日开始到取得系统时间为止所经过的毫秒数，例如1115346430703这个数字，但这样的数字没有人确切了解它的意 义是什么，您可以使用Date类别来让这个数字变的更有意义一些</p>
<p><strong>DateDemo2.java</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">  </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DateDemo2</span> </span>&#123;  </div><div class="line">    <span class="meta">@SuppressWarnings</span>(<span class="string">"deprecation"</span>)  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;  </div><div class="line">        Date date = <span class="keyword">new</span> Date();  </div><div class="line">          </div><div class="line">        System.out.println(<span class="string">"date.toString: "</span> + date.toString());  </div><div class="line">        System.out.println(<span class="string">"date: "</span> + date.getDate());  </div><div class="line">        System.out.println(<span class="string">"day: "</span> + date.getDay());  </div><div class="line">        System.out.println(<span class="string">"hour: "</span> + date.getHours());  </div><div class="line">        System.out.println(<span class="string">"minutes: "</span> + date.getMinutes());  </div><div class="line">        System.out.println(<span class="string">"month: "</span> + (date.getMonth() + <span class="number">1</span>));  </div><div class="line">        System.out.println(<span class="string">"seconds: "</span> + date.getSeconds());  </div><div class="line">        System.out.println(<span class="string">"time: "</span> + date.getTime());  </div><div class="line">        System.out.println(<span class="string">"timezone: "</span> + date.getTimezoneOffset());  </div><div class="line">        System.out.println(<span class="string">"year: "</span> + (date.getYear() + <span class="number">1900</span>));  </div><div class="line">          </div><div class="line">        Calendar calendar = Calendar.getInstance();  </div><div class="line">        <span class="keyword">int</span> year = calendar.get(Calendar.YEAR);  </div><div class="line">        <span class="keyword">int</span> month = calendar.get(Calendar.MONTH) + <span class="number">1</span>;  </div><div class="line">        <span class="keyword">int</span> day = calendar.get(Calendar.DATE);  </div><div class="line">        <span class="keyword">int</span> hour = calendar.get(Calendar.HOUR);  </div><div class="line">        <span class="keyword">int</span> minute = calendar.get(Calendar.MINUTE);  </div><div class="line">        <span class="keyword">int</span> second = calendar.get(Calendar.SECOND);  </div><div class="line">          </div><div class="line">        System.out.println(<span class="string">"----------Calendar-------"</span>);  </div><div class="line">        System.out.println(<span class="string">"year: "</span> + year);  </div><div class="line">        System.out.println(<span class="string">"month: "</span> + month);  </div><div class="line">        System.out.println(<span class="string">"day: "</span> + day);  </div><div class="line">        System.out.println(<span class="string">"hour: "</span> + hour);  </div><div class="line">        System.out.println(<span class="string">"minute: "</span> + minute);  </div><div class="line">        System.out.println(<span class="string">"second: "</span> + second);  </div><div class="line">          </div><div class="line">    	&#125;  </div><div class="line">	&#125;    </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>　　用date获得时间的值，如时、分、秒、月、日、年得方法已经过时，需要改用Calendar的方法来获取时间的值,输出结果为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">date.toString: Tue Jul <span class="number">19</span> <span class="number">15</span>:<span class="number">32</span>:<span class="number">42</span> CST <span class="number">2011</span>  </div><div class="line">date: <span class="number">19</span>  </div><div class="line">day: <span class="number">2</span>  </div><div class="line">hour: <span class="number">15</span>  </div><div class="line">minutes: <span class="number">32</span>  </div><div class="line">month: <span class="number">7</span>  </div><div class="line">seconds: <span class="number">42</span>  </div><div class="line">time: <span class="number">1311060762362</span>  </div><div class="line">timezone: -<span class="number">480</span>  </div><div class="line">year: <span class="number">2011</span>  </div><div class="line">----------Calendar-------  </div><div class="line">year: <span class="number">2011</span>  </div><div class="line">month: <span class="number">7</span>  </div><div class="line">day: <span class="number">19</span>  </div><div class="line">hour: <span class="number">3</span>  </div><div class="line">minute: <span class="number">32</span>  </div><div class="line">second: <span class="number">42</span></div></pre></td></tr></table></figure>
<p><strong>DateDemo3.java</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DateDemo3</span> </span>&#123;  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;  </div><div class="line">        Date date = <span class="keyword">new</span> Date();  </div><div class="line">          </div><div class="line">        <span class="comment">/* </span></div><div class="line">         * DateFormat会依电脑上的区域设定显示时间格式，EE表示星期，MM表示月份、dd表示日期，而yyyy是西元，每个字元的设定都各有其意义 </div><div class="line">         * 从Date--&gt;String </div><div class="line">         */  </div><div class="line">        DateFormat dateFormat = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"EE-MM-dd-yyyy"</span>);  </div><div class="line">        System.out.println(dateFormat.format(date));  </div><div class="line">          </div><div class="line">        DateFormat format1 = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd"</span>);  </div><div class="line">        System.out.println(format1.format(date));  </div><div class="line">          </div><div class="line">        DateFormat format2 = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);  </div><div class="line">        System.out.println(format2.format(date));  </div><div class="line">      </div><div class="line">        <span class="comment">/* </span></div><div class="line">         * 从String--&gt;Date </div><div class="line">         */  </div><div class="line">        String dateStr = <span class="string">"2011-7-19"</span>;  </div><div class="line">        <span class="keyword">try</span> &#123;  </div><div class="line">            Date dateTrans = format1.parse(dateStr);  </div><div class="line">            <span class="comment">//System.out.println(dateTrans.toString());   </span></div><div class="line">            System.out.println(dateTrans.toLocaleString());  <span class="comment">//转换为本地的形式  </span></div><div class="line">        &#125; <span class="keyword">catch</span> (ParseException e) &#123;  </div><div class="line">            e.printStackTrace();  </div><div class="line">        &#125;  </div><div class="line">          </div><div class="line">    &#125;  </div><div class="line">&#125;</div><div class="line">```  </div><div class="line"></div><div class="line"> 　　使用DateFormat来格式化日期数据，上面部分为从Date--&gt;String，下面的部分为从String--&gt;Date，输出结果为：</div><div class="line"></div><div class="line">``` java</div><div class="line">星期二-<span class="number">07</span>-<span class="number">19</span>-<span class="number">2011</span>  </div><div class="line"><span class="number">2011</span>-<span class="number">07</span>-<span class="number">19</span>  </div><div class="line"><span class="number">2011</span>-<span class="number">07</span>-<span class="number">19</span> <span class="number">15</span>:<span class="number">33</span>:<span class="number">27</span>  </div><div class="line"><span class="number">2011</span>-<span class="number">7</span>-<span class="number">19</span> <span class="number">0</span>:<span class="number">00</span>:<span class="number">00</span></div></pre></td></tr></table></figure></p>
<p><strong>DateDemo4.java</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DateDemo4</span> </span>&#123;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;  </div><div class="line">          </div><div class="line">        Date date = <span class="keyword">new</span> Date();  </div><div class="line">        DateFormat shortFormat = DateFormat.getDateTimeInstance(DateFormat.SHORT, DateFormat.SHORT);  </div><div class="line">        DateFormat mediumFormat = DateFormat.getDateTimeInstance(DateFormat.MEDIUM, DateFormat.MEDIUM);  </div><div class="line">        DateFormat longFormat = DateFormat.getDateTimeInstance(DateFormat.LONG, DateFormat.LONG);  </div><div class="line">        DateFormat fullFormat = DateFormat.getDateTimeInstance(DateFormat.FULL, DateFormat.FULL);  </div><div class="line">          </div><div class="line">        System.out.println(shortFormat.format(date));  </div><div class="line">        System.out.println(mediumFormat.format(date));  </div><div class="line">        System.out.println(longFormat.format(date));  </div><div class="line">        System.out.println(fullFormat.format(date));  </div><div class="line">          </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>输出结果为：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="number">11</span>-<span class="number">7</span>-<span class="number">19</span> 下午<span class="number">3</span>:<span class="number">33</span>  </div><div class="line"><span class="number">2011</span>-<span class="number">7</span>-<span class="number">19</span> <span class="number">15</span>:<span class="number">33</span>:<span class="number">54</span>  </div><div class="line"><span class="number">2011</span>年<span class="number">7</span>月<span class="number">19</span>日 下午<span class="number">03</span>时<span class="number">33</span>分<span class="number">54</span>秒  </div><div class="line"><span class="number">2011</span>年<span class="number">7</span>月<span class="number">19</span>日 星期二 下午<span class="number">03</span>时<span class="number">33</span>分<span class="number">54</span>秒 CST</div></pre></td></tr></table></figure></p>
<p><strong>DateDemo5.java</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DateDemo5</span> </span>&#123;  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;  </div><div class="line">        Date date = <span class="keyword">new</span> Date();  </div><div class="line">          </div><div class="line">        Locale locale = <span class="keyword">new</span> Locale(<span class="string">"en"</span>, <span class="string">"US"</span>);  </div><div class="line">          </div><div class="line">        DateFormat shortDateFormat = DateFormat.getDateInstance(DateFormat.SHORT, locale);  </div><div class="line">        DateFormat mediumDateFormat = DateFormat.getDateInstance(DateFormat.MEDIUM, locale);  </div><div class="line">        DateFormat longDateFormat = DateFormat.getDateInstance(DateFormat.LONG, locale);  </div><div class="line">        DateFormat fullDateFormat = DateFormat.getDateInstance(DateFormat.FULL, locale);  </div><div class="line">          </div><div class="line">        System.out.println(shortDateFormat.format(date));  </div><div class="line">        System.out.println(mediumDateFormat.format(date));  </div><div class="line">        System.out.println(longDateFormat.format(date));  </div><div class="line">        System.out.println(fullDateFormat.format(date));  </div><div class="line">          </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>输出结果为：</p>
<pre><code class="java"><span class="number">7</span>/<span class="number">19</span>/<span class="number">11</span>  
Jul <span class="number">19</span>, <span class="number">2011</span>  
July <span class="number">19</span>, <span class="number">2011</span>  
Tuesday, July <span class="number">19</span>, <span class="number">2011</span>
</code></pre>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/10/hello-world/" itemprop="url">
                  Hello World
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-10T21:03:15+08:00" content="2016-09-10">
              2016-09-10
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://7xu1cb.com1.z0.glb.clouddn.com/IMG_0273.JPG"
               alt="TokgoLiang" />
          <p class="site-author-name" itemprop="name">TokgoLiang</p>
          <p class="site-description motion-element" itemprop="description">In me the tiger sniffs the rose.</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">4</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">TokgoLiang</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
